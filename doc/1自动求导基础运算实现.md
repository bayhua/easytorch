# 1. 自动求导基础运算实现

这部分是自动求导的基础运算实现，注意下面的推导都是使用微分进行推导，直接使用导数推导会出现很多问题，比如矩阵求导时链式法则不成立、求得的导数结果为四维张量等等，使用微分就比较合适。具体实现代码见```tensor.py```。

## Add，Sub，Mul，Divide

最基础的四则运算，共同特点是都是逐元素运算，所以求导都十分简单，与标量形式基本相同，麻烦的是要注意考虑broadcast的问题。

1. $Z = X + Y$，则$dZ = dX + dY$，数学上梯度为单位矩阵，十分简单。比较复杂的是计算机实现中要考虑到向量的broadcast的问题，broadcast分为两种情况：第一种是其中一个矩阵的维度小于另一个，比如$X=[[1, 2], [3, 4]]$，$Y = [1, 2]$，那么在对$Y$求微分时，需要将多余的维度进行$sum$操作；另一种情况是两个的维度相等，但其中一个的某些维度形状为1，比如$X=[[1, 2], [3, 4]]$，$Y = [[1, 2]]$中，$shape(X) = (2, 2)$，$shape(Y)=(1, 2)$，需要对$shape$为1的维度做$sum$操作。

2. Sub可以直接使用Add实现。

3. 逐元素乘法，$Z = X\odot Y$。

4. 逐元素除法，$Z = X / Y$。

## Matmul

矩阵乘法或叫矩阵内积，$Z = XY$，对$X$的微分为$dZ = dXY$，所以梯度为$Y^T$，而且要注意左右的顺序。

## 测试

未测试的代码永远是错的。所以最重要的一步是进行测试，因为API和pytorch完全相同，所以采用和pytorch对拍的方式测试正确性。
